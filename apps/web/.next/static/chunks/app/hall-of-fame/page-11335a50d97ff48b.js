(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[786],{2187:(e,t,s)=>{Promise.resolve().then(s.bind(s,3706))},2942:(e,t,s)=>{"use strict";var r=s(2418);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},3706:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(4568),a=s(7620),l=s(2942),i=s(9715),c=s(7261),n=s.n(c);function o(){let[e,t]=(0,a.useState)([]),[s,c]=(0,a.useState)(!0),[o,d]=(0,a.useState)(null),{isAuthenticated:u,isLoading:m}=(0,i.A)(),x=(0,l.useRouter)();return((0,a.useEffect)(()=>{let e=async()=>{try{c(!0);let e=await fetch("/api/top-users",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw Error("Failed to fetch top users");let s=await e.json();console.log("Top users data:",s),t(s),c(!1)}catch(e){console.error("Error fetching top users:",e),d("Failed to load the Hall of Fame. Please try again later."),c(!1)}};u&&e()},[u]),(0,a.useEffect)(()=>{m||u||x.push("/login")},[u,m,x]),m||s)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-yellow-50 via-orange-50 to-red-50",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-500"})}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 via-orange-50 to-red-50 p-6",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)("div",{className:"text-center mb-12",children:[(0,r.jsx)("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent",children:"Hall of Fame"}),(0,r.jsx)("p",{className:"text-lg text-gray-600",children:"Our top learners with the highest scores"})]})})}),o&&(0,r.jsx)("div",{className:"bg-red-100 text-red-700 p-4 rounded-lg mb-6 text-center",children:o}),e.length>0&&(0,r.jsxs)("div",{className:"flex justify-center items-end mb-16 h-64 px-4",children:[e.length>=2&&(0,r.jsxs)("div",{className:"mx-4 flex flex-col items-center",children:[(0,r.jsxs)("div",{className:"relative",children:[e[1].ProfilePicture?(0,r.jsx)("img",{src:e[1].ProfilePicture,alt:"".concat(e[1].FirstName," ").concat(e[1].LastName),className:"w-16 h-16 rounded-full object-cover border-4 border-gray-300"}):(0,r.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-300 flex items-center justify-center text-2xl",children:e[1].FirstName.charAt(0)}),(0,r.jsx)("div",{className:"absolute -top-5 -right-2 bg-gray-300 w-8 h-8 rounded-full flex items-center justify-center text-white font-bold",children:"2"})]}),(0,r.jsxs)("div",{className:"h-32 w-24 bg-gray-300 rounded-t-lg mt-4 flex flex-col items-center justify-center p-2",children:[(0,r.jsxs)("p",{className:"font-semibold text-center text-sm truncate w-full",children:[e[1].FirstName," ",e[1].LastName]}),(0,r.jsx)("p",{className:"text-lg font-bold text-gray-700",children:e[1].Score})]})]}),e.length>=1&&(0,r.jsxs)("div",{className:"mx-4 flex flex-col items-center",children:[(0,r.jsxs)("div",{className:"relative",children:[e[0].ProfilePicture?(0,r.jsx)("img",{src:e[0].ProfilePicture,alt:"".concat(e[0].FirstName," ").concat(e[0].LastName),className:"w-20 h-20 rounded-full object-cover border-4 border-yellow-400"}):(0,r.jsx)("div",{className:"w-20 h-20 rounded-full bg-yellow-400 flex items-center justify-center text-3xl",children:e[0].FirstName.charAt(0)}),(0,r.jsx)("div",{className:"absolute -top-5 -right-2 bg-yellow-500 w-8 h-8 rounded-full flex items-center justify-center text-white font-bold",children:"1"})]}),(0,r.jsxs)("div",{className:"h-48 w-32 bg-yellow-400 rounded-t-lg mt-4 flex flex-col items-center justify-center p-2",children:[(0,r.jsxs)("p",{className:"font-semibold text-center text-lg truncate w-full",children:[e[0].FirstName," ",e[0].LastName]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-yellow-800",children:e[0].Score}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("span",{className:"text-4xl",children:"\uD83D\uDC51"})})]})]}),e.length>=3&&(0,r.jsxs)("div",{className:"mx-4 flex flex-col items-center",children:[(0,r.jsxs)("div",{className:"relative",children:[e[2].ProfilePicture?(0,r.jsx)("img",{src:e[2].ProfilePicture,alt:"".concat(e[2].FirstName," ").concat(e[2].LastName),className:"w-14 h-14 rounded-full object-cover border-4 border-amber-700"}):(0,r.jsx)("div",{className:"w-14 h-14 rounded-full bg-amber-700 flex items-center justify-center text-xl",children:e[2].FirstName.charAt(0)}),(0,r.jsx)("div",{className:"absolute -top-5 -right-2 bg-amber-700 w-8 h-8 rounded-full flex items-center justify-center text-white font-bold",children:"3"})]}),(0,r.jsxs)("div",{className:"h-24 w-20 bg-amber-700 rounded-t-lg mt-4 flex flex-col items-center justify-center p-2",children:[(0,r.jsxs)("p",{className:"font-semibold text-center text-xs truncate w-full text-white",children:[e[2].FirstName," ",e[2].LastName]}),(0,r.jsx)("p",{className:"text-base font-bold text-amber-200",children:e[2].Score})]})]})]}),e.length>3&&(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden mb-8",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-orange-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Rank"}),(0,r.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"User"}),(0,r.jsx)("th",{className:"py-3 px-4 text-right text-sm font-semibold text-gray-700",children:"Score"})]})}),(0,r.jsx)("tbody",{children:e.slice(3).map(e=>(0,r.jsxs)("tr",{className:"border-t border-gray-200",children:[(0,r.jsx)("td",{className:"py-4 px-4 flex items-center",children:(0,r.jsxs)("span",{className:"bg-gray-200 w-8 h-8 rounded-full flex items-center justify-center font-bold text-gray-700",children:[e.UserRank," "]})}),(0,r.jsx)("td",{className:"py-4 px-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[e.ProfilePicture?(0,r.jsx)("img",{src:e.ProfilePicture,alt:"".concat(e.FirstName," ").concat(e.LastName),className:"w-10 h-10 rounded-full object-cover mr-3"}):(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center mr-3",children:e.FirstName.charAt(0)}),(0,r.jsxs)("span",{className:"font-medium",children:[e.FirstName," ",e.LastName]})]})}),(0,r.jsx)("td",{className:"py-4 px-4 text-right font-bold text-gray-800",children:e.Score})]},e.UserId))})]})}),(0,r.jsx)("div",{className:"mt-8 flex justify-center gap-4",children:(0,r.jsx)(n(),{href:"/topics",className:"px-6 py-3 bg-white rounded-full shadow-md hover:shadow-lg transition-all duration-300 text-orange-600 font-medium",children:"Back to Topics"})})]})}},9715:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(7620);let a=()=>{let[e,t]=(0,r.useState)({isAuthenticated:!1,isLoading:!0,user:null,error:null});(0,r.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(!e)return t({isAuthenticated:!1,isLoading:!1,user:null,error:null});try{let s=await fetch("/api/auth/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}),r=await s.json();if(r.success){let e=r.user;if(!e){let t=localStorage.getItem("user");t&&(e=JSON.parse(t))}t({isAuthenticated:!0,isLoading:!1,user:e,error:null})}else localStorage.removeItem("token"),localStorage.removeItem("user"),t({isAuthenticated:!1,isLoading:!1,user:null,error:r.message||"Authentication failed"})}catch(e){console.error("Auth validation error:",e),t({isAuthenticated:!1,isLoading:!1,user:null,error:e instanceof Error?e.message:"Authentication error"})}})()},[]);let s=async(e,s)=>{try{t(e=>({...e,isLoading:!0}));let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s})}),a=await r.json();if(a.success)return localStorage.setItem("token",a.token),localStorage.setItem("user",JSON.stringify(a.user)),t({isAuthenticated:!0,isLoading:!1,user:a.user,error:null}),{success:!0};return t({isAuthenticated:!1,isLoading:!1,user:null,error:a.message||"Login failed"}),{success:!1,message:a.message||"Login failed"}}catch(s){let e=s instanceof Error?s.message:"An unexpected error occurred";return t({isAuthenticated:!1,isLoading:!1,user:null,error:e}),{success:!1,message:e}}};return{...e,login:s,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t({isAuthenticated:!1,isLoading:!1,user:null,error:null})}}}}},e=>{var t=t=>e(e.s=t);e.O(0,[261,587,315,358],()=>t(2187)),_N_E=e.O()}]);