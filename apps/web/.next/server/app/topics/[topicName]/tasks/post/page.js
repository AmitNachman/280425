(()=>{var e={};e.id=330,e.ids=[330],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11927:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var o=s(24332),r=s(48819),a=s(67851),n=s.n(a),i=s(97540),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let c={children:["",{children:["topics",{children:["[topicName]",{children:["tasks",{children:["post",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,31194)),"/Users/amitnachman/Desktop/280425/apps/web/src/app/topics/[topicName]/tasks/post/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,97814)),"/Users/amitnachman/Desktop/280425/apps/web/src/app/topics/[topicName]/tasks/layout.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,20685)),"/Users/amitnachman/Desktop/280425/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,92341,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/amitnachman/Desktop/280425/apps/web/src/app/topics/[topicName]/tasks/post/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new o.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/topics/[topicName]/tasks/post/page",pathname:"/topics/[topicName]/tasks/post",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},14276:()=>{},17973:(e,t,s)=>{Promise.resolve().then(s.bind(s,40072))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20685:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a,metadata:()=>r});var o=s(38828);s(14276);let r={title:"Unity Voice",description:"Unity Voice app"};function a({children:e}){return(0,o.jsx)("html",{lang:"en",children:(0,o.jsx)("body",{className:"antialiased",children:e})})}},27701:(e,t,s)=>{Promise.resolve().then(s.bind(s,31194))},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31194:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});let o=(0,s(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/amitnachman/Desktop/280425/apps/web/src/app/topics/[topicName]/tasks/post/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/amitnachman/Desktop/280425/apps/web/src/app/topics/[topicName]/tasks/post/page.tsx","default")},33873:e=>{"use strict";e.exports=require("path")},34935:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,69355,23)),Promise.resolve().then(s.t.bind(s,54439,23)),Promise.resolve().then(s.t.bind(s,67851,23)),Promise.resolve().then(s.t.bind(s,94730,23)),Promise.resolve().then(s.t.bind(s,19774,23)),Promise.resolve().then(s.t.bind(s,53170,23)),Promise.resolve().then(s.t.bind(s,20968,23)),Promise.resolve().then(s.t.bind(s,78298,23))},38504:()=>{},40072:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var o=s(13486),r=s(60159),a=s(2984),n=s(49704),i=s(70173),l=s(58369);let c=e=>{let t=e.replace(/-/g," "),s=t.split(" ").filter(e=>e.length>2),o=[];return[...new Set([...s,...t.includes("diplomacy")||t.includes("relation")?["international","negotiation","treaty","agreement","peace","allies","cooperation","mediation"]:t.includes("economy")||t.includes("entrepreneur")?["business","market","innovation","startup","investment","growth","industry","commerce"]:t.includes("innovation")||t.includes("technology")?["digital","research","development","startup","advancement","science","progress","future"]:t.includes("history")||t.includes("heritage")?["legacy","tradition","culture","ancient","historic","civilization","preservation","roots"]:t.includes("holocaust")||t.includes("revival")?["memory","survival","resilience","commemoration","trauma","healing","testimony","legacy"]:t.includes("society")||t.includes("culture")?["community","traditions","values","heritage","diversity","identity","customs","practices"]:["israel","israeli","jewish","society","community","culture","development","perspective"]])]},d=e=>{let t=e.replace(/-/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return`Today I want to discuss ${t}, which is a fascinating aspect of Israeli society and culture.

What do you find most interesting about ${t}? 

How has ${t} evolved over the years in Israel?`},u=e=>c(e).slice(0,5);function m(){let{isAuthenticated:e,isLoading:t,user:s}=(0,l.A)(),c=(0,a.useRouter)(),m=(0,a.useParams)(),h=(0,a.useSearchParams)(),p=m?.topicName,g=h?.get("level")||"1",x=h?.get("taskId"),[b,y]=(0,r.useState)(""),[f,v]=(0,r.useState)(""),[w,j]=(0,r.useState)(!0),[k,N]=(0,r.useState)(!1),[C,I]=(0,r.useState)(null),[S,P]=(0,r.useState)([]),[D,T]=(0,r.useState)(null),[$,A]=(0,r.useState)({likes:Math.floor(50*Math.random())+10,comments:0,shares:Math.floor(10*Math.random())+5}),[U,_]=(0,r.useState)(!1),[L,E]=(0,r.useState)(null),[O,q]=(0,r.useState)(!1),F=e=>e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),M=`${F(p)} - Social Post Task`,R=e=>{let t=e.toLowerCase(),s="";s=t.includes("diplomacy")||t.includes("relation")?"https://cdn.pixabay.com/photo/2017/08/05/12/08/network-2583270_1280.jpg":t.includes("economy")||t.includes("entrepreneur")?"https://cdn.pixabay.com/photo/2017/09/07/08/54/money-2724241_1280.jpg":t.includes("innovation")||t.includes("technology")?"https://cdn.pixabay.com/photo/2016/11/19/14/00/code-1839406_1280.jpg":t.includes("history")||t.includes("heritage")?"https://cdn.pixabay.com/photo/2018/07/20/14/02/israel-3550699_1280.jpg":t.includes("holocaust")||t.includes("revival")?"https://cdn.pixabay.com/photo/2016/05/15/20/52/jerusalem-1394562_1280.jpg":t.includes("iron")||t.includes("sword")||t.includes("war")?"https://cdn.pixabay.com/photo/2016/06/13/07/59/soldier-1453836_1280.jpg":t.includes("society")||t.includes("culture")?"https://cdn.pixabay.com/photo/2020/01/10/11/36/jerusalem-4754666_1280.jpg":t.includes("environment")||t.includes("sustainability")?"https://cdn.pixabay.com/photo/2019/10/20/19/30/nature-4564618_1280.jpg":"https://cdn.pixabay.com/photo/2016/11/14/03/35/tel-aviv-1822624_1280.jpg",console.log(`Selected image URL for topic "${e}": ${s}`),E(s)},z=e=>e.split(/[.!?]+/).filter(e=>e.trim()).filter(e=>{let t=e.trim();return t.endsWith("?")||/\bwhat\b|\bwhy\b|\bhow\b|\bwhen\b|\bwhere\b|\bwhich\b|\bwho\b|\bcan you\b|\bdo you\b|\bwould you\b/i.test(t)}),J=e=>e.toLowerCase().replace(/\b(what|why|how|when|where|which|who|is|are|do|does|did|can|could|would|should|the|a|an)\b/g," ").split(/\s+/).filter(e=>e.length>3&&!/[.,?!;:]/.test(e)).map(e=>e.trim()),G=e=>{let t=0,s=e.split(/[.!?]+/).filter(e=>e.trim()),o=e.split(/\s+/).length;o>=50?t+=20:o>=30?t+=15:o>=20?t+=10:t+=5;let r=s.length>0?o/s.length:0;r>=8&&r<=15?t+=20:r>=5&&(t+=10);let a=s.length>0&&s[0].length>20;a&&(t+=5),s.length>1&&s[s.length-1].length>20&&(t+=5);let n=0,i=s.filter(e=>e.trim().length>0&&e.trim()[0]===e.trim()[0].toUpperCase()).length;s.length>0&&(n+=Math.round(i/s.length*20)),n+=Math.min(20,5*(e.match(/[.!?][\s\n]+[A-Z]/g)?.length||0)),e.match(/[,.!?][a-zA-Z]/)||(n+=10);let l=0,c=S.map(t=>{let s=RegExp(t,"i").test(e),o="";if(s){let s=e.match(RegExp(`.{0,30}${t}.{0,30}`,"i"));o=s?`...${s[0]}...`:"",e.toLowerCase().includes(`${t.toLowerCase()} is`)||e.toLowerCase().includes(`the ${t.toLowerCase()}`)?(l+=10,o+=" (Great context!)"):l+=5}return{word:t,used:s,context:o}}),d=0,u=z(b);if(u.length>0){let t=u.filter(t=>J(t).some(t=>e.toLowerCase().includes(t.toLowerCase()))),s=t.length/u.length*100;s>=90?d+=30:s>=70?d+=25:s>=50?d+=20:s>=30?d+=15:s>0&&(d+=10),t.some(t=>J(t).some(t=>{let s=e.toLowerCase().indexOf(t.toLowerCase());return s>=0&&e.slice(s+t.length).length>50}))?d+=20:t.length>0&&(d+=10)}else{let t=S.concat(F(p).toLowerCase().split(" ")),o=t.filter(t=>e.toLowerCase().includes(t.toLowerCase())).length/t.length*100;o>=70?d+=40:o>=50?d+=30:o>=30?d+=20:o>0&&(d+=10),s.filter(e=>t.some(t=>e.toLowerCase().includes(t.toLowerCase()))).length>=3&&(d+=10)}let m=Math.min(200,t+n+l+d);return{score:m,clarityFeedback:t>=40?"Excellent! Your message is clear and well-structured.":t>=25?"Good job on clarity, but try to improve your structure.":"Try to organize your ideas more clearly.",grammarFeedback:n>=40?"Your grammar is excellent!":n>=25?"Your grammar is good, with a few minor issues.":"Pay more attention to grammar and punctuation.",vocabularyFeedback:l>=40?"Excellent use of the required vocabulary!":l>=25?"Good use of vocabulary, but try to use more words in context.":"Try to incorporate more of the required words.",contentRelevanceFeedback:d>=50?"Excellent! Your response directly addresses the questions asked in the post with thoughtful elaboration.":d>=40?"Good job! Your response addresses most of the questions, but could use more detailed elaboration.":d>=30?"Your response touches on the questions, but could be more directly focused on answering them.":d>=20?"Try to more directly address the specific questions asked in the post.":"Your response doesn't seem to address the questions in the post. Make sure to answer what was asked.",wordUsage:c,overallFeedback:m>=190?"Outstanding work! Your response is thoughtful, relevant, and well-crafted.":m>=150?"Great job! Your response shows good understanding and addresses the topic well.":m>=100?"Good effort! Your response is on topic but could be improved with more direct answers.":"Keep practicing! Focus on directly answering the questions in the post."}},Y=async()=>{if(f.trim()){N(!0),I(null);try{console.log("Submitting user comment and updating task...");let e=G(f),t=(0,i.c4)();if(!t)throw Error("Authentication token not found");try{let s=0,o=Date.now()-(window.performance?.timing?.navigationStart||Date.now()-3e5);s=Math.floor(o/1e3);let r=sessionStorage.getItem(`task_start_${x}`);r&&(s=Math.floor((Date.now()-parseInt(r))/1e3)),console.log(`Task duration: ${s} seconds`);let a=x;if(!a){console.warn("No taskId found, creating a new task");try{let e=await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({TopicName:p||"general",Level:g||"1",TaskType:"post",StartDate:new Date(Date.now()-1e3*s).toISOString()})});if(e.ok){let t=await e.json();t.TaskId?(a=t.TaskId,console.log(`Created new task with ID: ${a}`)):(a=crypto.randomUUID?crypto.randomUUID():`task_${Date.now()}`,console.warn(`Response did not include TaskId, using generated ID: ${a}`))}else a=crypto.randomUUID?crypto.randomUUID():`task_${Date.now()}`,console.error(`Failed to create task, using local ID: ${a}`)}catch(e){a=crypto.randomUUID?crypto.randomUUID():`task_${Date.now()}`,console.error("Error creating task:",e),console.error(`Using local task ID: ${a}`)}}console.log(`Using task ID: ${a}`),console.log("Creating new post for this task...");let n=crypto.randomUUID?crypto.randomUUID():`post_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,i=n;try{let e=await fetch(`/api/posts/${encodeURIComponent(a||"")}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({PostID:n,TaskId:a,PostContent:b||"Default post content",Picture:L})});if(e.ok)try{let t=await e.json();t.PostID&&(i=t.PostID),console.log(`Post created with ID: ${i}`)}catch(e){console.error("Error parsing create post response:",e)}else console.error("Failed to create post via API")}catch(e){console.error("Error creating post:",e)}console.log(`Saving comment for post ID: ${i}`);let l=crypto.randomUUID?crypto.randomUUID():`comment_${Date.now()}_${Math.random().toString(36).substring(2,9)}`;try{(await fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({CommentID:l,PostID:i,commentContent:f,Feedback:JSON.stringify(e),TaskId:a})})).ok?console.log("Comment saved successfully via API"):console.error("Failed to save comment via API, proceeding anyway")}catch(e){console.error("Error saving comment:",e)}console.log("Updating task status using multiple approaches...");let c=[];c.push(fetch(`/api/tasks/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({TaskScore:e.score,DurationTask:s,CompletionDate:new Date().toISOString()})}).then(e=>!!e.ok&&(console.log("Task updated successfully via PATCH to /api/tasks/[taskId]"),!0)).catch(e=>(console.error("Error updating task via PATCH to /api/tasks/[taskId]:",e),!1))),c.push(fetch("/api/tasks",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({taskId:a,TaskScore:e.score,DurationTask:s,CompletionDate:new Date().toISOString()})}).then(e=>!!e.ok&&(console.log("Task updated successfully via PUT to /api/tasks"),!0)).catch(e=>(console.error("Error updating task via PUT to /api/tasks:",e),!1))),c.push(fetch(`/api/tasks/${a}/duration`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({duration:s})}).then(e=>!!e.ok&&(console.log("Task duration updated successfully via PATCH to /api/tasks/[taskId]/duration"),!0)).catch(e=>(console.error("Error updating task duration:",e),!1))),(await Promise.allSettled(c)).some(e=>"fulfilled"===e.status&&!0===e.value)?console.log("Task update succeeded through at least one method"):console.error("All task update attempts failed"),T(e),A(e=>({...e,comments:e.comments+1})),console.log("Comment submission complete!")}catch(t){console.error("API error:",t),T(e),A(e=>({...e,comments:e.comments+1})),I("יש בעיה בשמירת התגובה, אך באפשרותך להמשיך בתהליך הלמידה")}}catch(e){console.error("Error in handleSubmitComment:",e),T(G(f)),A(e=>({...e,comments:e.comments+1})),I("אירעה שגיאה בעת שליחת התגובה, אך הערכת התוכן בוצעה בהצלחה")}finally{N(!1)}}},B=async()=>{if(x)try{sessionStorage.setItem(`post_task_${p}_${g}`,x);let e=localStorage.getItem(`post_id_${x}`),t=(0,i.c4)();if(t)try{console.log("Creating conversation task");let s=await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({TopicName:p,Level:g,TaskType:"conversation",StartDate:new Date().toISOString()})});if(s.ok){let t=(await s.json()).TaskId;console.log("Conversation task created successfully with ID:",t),c.push(`/topics/${p}/tasks/conversation?level=${g}&taskId=${t}&postId=${e||""}`);return}}catch(e){console.error("Error creating conversation task:",e)}}catch(e){console.error("Error in navigateToNextTask:",e)}c.push(`/topics/${p}/tasks/conversation?level=${g}`)};return t||w?(0,o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 via-orange-50 to-red-50 p-6 flex justify-center items-center",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"inline-block w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mb-4"}),(0,o.jsx)("p",{className:"text-xl font-medium text-gray-700",children:"Loading post..."})]})}):C?(0,o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 via-orange-50 to-red-50 p-6 flex justify-center items-center",children:(0,o.jsxs)("div",{className:"max-w-md w-full bg-white p-8 rounded-2xl shadow-xl text-center",children:[(0,o.jsx)("div",{className:"text-red-500 text-5xl mb-4",children:"❌"}),(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:C}),(0,o.jsx)("p",{className:"text-gray-600 mb-6",children:"We're having trouble loading the post. Let's try a different approach."}),(0,o.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,o.jsx)("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 transition-all duration-300",children:"Try Again"}),(0,o.jsx)("button",{onClick:()=>{I(null),y(d(F(p))),P(u(p)),R(p)},className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-all duration-300",children:"Continue with Example Post"})]})]})}):(0,o.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 via-orange-50 to-red-50 p-6 relative",dir:"ltr",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-center text-gray-800 mb-6 mt-2",children:M}),(0,o.jsxs)("div",{className:"max-w-4xl mx-auto mt-4",children:[(0,o.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[(0,o.jsxs)("div",{className:"flex items-center mb-8",children:[(0,o.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center text-xl",children:"\uD83D\uDC64"}),(0,o.jsxs)("div",{className:"ml-4",children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Israel Expert"}),(0,o.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"2 hours ago • \uD83C\uDF0D"})]})]}),(0,o.jsxs)("div",{className:"flex flex-col md:flex-row gap-8 mb-8",children:[(0,o.jsx)("div",{className:"prose text-gray-800 md:w-3/5",children:(0,o.jsx)("p",{className:"whitespace-pre-line",children:b})}),(0,o.jsx)("div",{className:"md:w-2/5",children:L&&(0,o.jsx)("img",{src:L,alt:"Post Image",className:"w-full rounded-lg object-cover h-64",onError:e=>{e.currentTarget.src="https://placehold.co/800x600?text=Israeli+Culture"}})})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-12 text-gray-600",children:[(0,o.jsxs)("button",{onClick:()=>{_(!U),A(e=>({...e,likes:e.likes+(U?-1:1)}))},className:"flex items-center space-x-2 hover:text-red-500 transition-colors",children:[(0,o.jsx)(n.Mbv,{style:{color:U?"#ef4444":"inherit"}}),(0,o.jsx)("span",{className:"ml-2",children:$.likes})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)(n.j1Q,{}),(0,o.jsx)("span",{className:"ml-2",children:$.comments})]}),(0,o.jsxs)("button",{className:"flex items-center space-x-2 hover:text-blue-500 transition-colors",children:[(0,o.jsx)(n.Zzu,{}),(0,o.jsx)("span",{className:"ml-2",children:$.shares})]})]})]}),(0,o.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[(0,o.jsxs)("div",{className:"flex items-center mb-6",children:[(0,o.jsx)(n.__w,{className:"text-orange-500 mr-3 text-xl"}),(0,o.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Required Words:"})]}),(0,o.jsx)("div",{className:"flex flex-wrap gap-3",children:S.map(e=>(0,o.jsx)("span",{className:"px-6 py-3 bg-orange-500 text-white rounded-full text-base font-medium shadow-sm",children:e},e))})]}),(0,o.jsx)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:D?(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,o.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Your Response:"}),(0,o.jsx)("p",{className:"text-gray-700 whitespace-pre-line",children:f})]}),(0,o.jsxs)("div",{className:"bg-orange-50 p-6 rounded-lg",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,o.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Feedback:"}),(0,o.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[D.score,"/200 points"]})]}),(0,o.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-bold text-gray-700",children:"Content relevance:"}),(0,o.jsx)("p",{className:"text-gray-600",children:D.contentRelevanceFeedback})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-bold text-gray-700",children:"Clarity of message:"}),(0,o.jsx)("p",{className:"text-gray-600",children:D.clarityFeedback})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-bold text-gray-700",children:"Grammatical accuracy:"}),(0,o.jsx)("p",{className:"text-gray-600",children:D.grammarFeedback})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-bold text-gray-700",children:"Use of required words:"}),(0,o.jsx)("p",{className:"text-gray-600",children:D.vocabularyFeedback}),(0,o.jsx)("ul",{className:"mt-2 space-y-2",children:D.wordUsage.map(({word:e,used:t,context:s})=>(0,o.jsxs)("li",{className:"flex items-center",children:[(0,o.jsx)("span",{className:`mr-2 ${t?"text-green-500":"text-red-500"}`,children:t?"✓":"✗"}),(0,o.jsxs)("span",{className:"font-medium",children:[e,":"]}),(0,o.jsx)("span",{className:"ml-2 text-gray-500",children:t?s:"Not found in your response"})]},e))})]})]}),(0,o.jsx)("div",{className:"text-center p-4 bg-white rounded-lg",children:(0,o.jsx)("p",{className:"text-xl font-bold text-orange-600",children:D.overallFeedback})}),(0,o.jsx)("div",{className:"mt-6 text-center",children:(0,o.jsx)("button",{onClick:B,className:"px-8 py-4 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-all duration-300 transform hover:-translate-y-1 shadow-md hover:shadow-lg text-lg",children:"Continue to Interactive Conversation \uD83C\uDF99️"})})]})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"Write a response to this post:"}),(0,o.jsx)("p",{className:"text-gray-600 mb-4",children:"Use the required words in your response. We'll provide feedback on your comment."}),(0,o.jsx)("textarea",{value:f,onChange:e=>v(e.target.value),placeholder:`Write your response about ${F(p)} using the required words...`,className:"w-full p-4 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-orange-500 min-h-32 text-gray-900 mb-4",rows:6}),(0,o.jsx)("button",{onClick:Y,disabled:k||!f.trim(),className:"w-full bg-orange-500 text-white py-3 rounded-lg hover:bg-orange-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Submitting...":"Submit Response"})]})})]})]})}},55511:e=>{"use strict";e.exports=require("crypto")},58369:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var o=s(60159);let r=()=>{let[e,t]=(0,o.useState)({isAuthenticated:!1,isLoading:!0,user:null,error:null});(0,o.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(!e)return t({isAuthenticated:!1,isLoading:!1,user:null,error:null});try{let s=await fetch("/api/auth/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}),o=await s.json();if(o.success){let e=o.user;if(!e){let t=localStorage.getItem("user");t&&(e=JSON.parse(t))}t({isAuthenticated:!0,isLoading:!1,user:e,error:null})}else localStorage.removeItem("token"),localStorage.removeItem("user"),t({isAuthenticated:!1,isLoading:!1,user:null,error:o.message||"Authentication failed"})}catch(e){console.error("Auth validation error:",e),t({isAuthenticated:!1,isLoading:!1,user:null,error:e instanceof Error?e.message:"Authentication error"})}})()},[]);let s=async(e,s)=>{try{t(e=>({...e,isLoading:!0}));let o=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s})}),r=await o.json();if(r.success)return localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.user)),t({isAuthenticated:!0,isLoading:!1,user:r.user,error:null}),{success:!0};return t({isAuthenticated:!1,isLoading:!1,user:null,error:r.message||"Login failed"}),{success:!1,message:r.message||"Login failed"}}catch(s){let e=s instanceof Error?s.message:"An unexpected error occurred";return t({isAuthenticated:!1,isLoading:!1,user:null,error:e}),{success:!1,message:e}}};return{...e,login:s,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t({isAuthenticated:!1,isLoading:!1,user:null,error:null})}}}},62959:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,30385,23)),Promise.resolve().then(s.t.bind(s,33737,23)),Promise.resolve().then(s.t.bind(s,86081,23)),Promise.resolve().then(s.t.bind(s,1904,23)),Promise.resolve().then(s.t.bind(s,35856,23)),Promise.resolve().then(s.t.bind(s,55492,23)),Promise.resolve().then(s.t.bind(s,89082,23)),Promise.resolve().then(s.t.bind(s,45812,23))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70173:(e,t,s)=>{"use strict";function o(){return null}s.d(t,{c4:()=>o}),s(32970)},74952:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},80408:()=>{},87032:()=>{},97814:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var o=s(38828);function r({children:e}){return(0,o.jsx)("html",{lang:"en",children:(0,o.jsx)("body",{children:e})})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),o=t.X(0,[191,787,843,704],()=>s(11927));module.exports=o})();