(()=>{var e={};e.id=700,e.ids=[700],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12765:(e,t,r)=>{Promise.resolve().then(r.bind(r,67868))},14276:()=>{},15262:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/amitnachman/Desktop/280425/apps/web/src/app/topics/[topicName]/tasks/flashcard/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/amitnachman/Desktop/280425/apps/web/src/app/topics/[topicName]/tasks/flashcard/page.tsx","default")},17501:(e,t,r)=>{Promise.resolve().then(r.bind(r,15262))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20685:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>a});var s=r(38828);r(14276);let a={title:"Unity Voice",description:"Unity Voice app"};function n({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:"antialiased",children:e})})}},20768:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(55511);let a={randomUUID:s.randomUUID},n=new Uint8Array(256),o=n.length,l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));let i=function(e,t,r){if(a.randomUUID&&!t&&!e)return a.randomUUID();let i=(e=e||{}).random??e.rng?.()??(o>n.length-16&&((0,s.randomFillSync)(n),o=0),n.slice(o,o+=16));if(i.length<16)throw Error("Random bytes length must be >= 16");if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=i[e];return t}return function(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}(i)}},27799:(e,t,r)=>{"use strict";function s(e){return e.includes(" ")&&/[A-Z]/.test(e)?e:e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function a(e){return e.includes("-")&&!/[A-Z]/.test(e)?e:e.toLowerCase().replace(/\s+/g,"-")}r.d(t,{o_:()=>a,x$:()=>s})},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34935:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,69355,23)),Promise.resolve().then(r.t.bind(r,54439,23)),Promise.resolve().then(r.t.bind(r,67851,23)),Promise.resolve().then(r.t.bind(r,94730,23)),Promise.resolve().then(r.t.bind(r,19774,23)),Promise.resolve().then(r.t.bind(r,53170,23)),Promise.resolve().then(r.t.bind(r,20968,23)),Promise.resolve().then(r.t.bind(r,78298,23))},38504:()=>{},55511:e=>{"use strict";e.exports=require("crypto")},58369:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(60159);let a=()=>{let[e,t]=(0,s.useState)({isAuthenticated:!1,isLoading:!0,user:null,error:null});(0,s.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(!e)return t({isAuthenticated:!1,isLoading:!1,user:null,error:null});try{let r=await fetch("/api/auth/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}),s=await r.json();if(s.success){let e=s.user;if(!e){let t=localStorage.getItem("user");t&&(e=JSON.parse(t))}t({isAuthenticated:!0,isLoading:!1,user:e,error:null})}else localStorage.removeItem("token"),localStorage.removeItem("user"),t({isAuthenticated:!1,isLoading:!1,user:null,error:s.message||"Authentication failed"})}catch(e){console.error("Auth validation error:",e),t({isAuthenticated:!1,isLoading:!1,user:null,error:e instanceof Error?e.message:"Authentication error"})}})()},[]);let r=async(e,r)=>{try{t(e=>({...e,isLoading:!0}));let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})}),a=await s.json();if(a.success)return localStorage.setItem("token",a.token),localStorage.setItem("user",JSON.stringify(a.user)),t({isAuthenticated:!0,isLoading:!1,user:a.user,error:null}),{success:!0};return t({isAuthenticated:!1,isLoading:!1,user:null,error:a.message||"Login failed"}),{success:!1,message:a.message||"Login failed"}}catch(r){let e=r instanceof Error?r.message:"An unexpected error occurred";return t({isAuthenticated:!1,isLoading:!1,user:null,error:e}),{success:!1,message:e}}};return{...e,login:r,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t({isAuthenticated:!1,isLoading:!1,user:null,error:null})}}}},62959:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,30385,23)),Promise.resolve().then(r.t.bind(r,33737,23)),Promise.resolve().then(r.t.bind(r,86081,23)),Promise.resolve().then(r.t.bind(r,1904,23)),Promise.resolve().then(r.t.bind(r,35856,23)),Promise.resolve().then(r.t.bind(r,55492,23)),Promise.resolve().then(r.t.bind(r,89082,23)),Promise.resolve().then(r.t.bind(r,45812,23))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67868:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(13486),a=r(60159),n=r(49704),o=r(2984),l=r(49989),i=r.n(l),d=r(70173),c=r(58369),u=r(20768),h=r(27799);function m(){let{isAuthenticated:e,isLoading:t,user:r}=(0,c.A)(),l=(0,o.useRouter)(),m=(0,o.useParams)(),p=(0,o.useSearchParams)(),g=m.topicName,x=p.get("level")||"1",[f,b]=(0,a.useState)(parseInt(x,10)||1),[v,y]=(0,a.useState)([]),[w,j]=(0,a.useState)(0),[k,N]=(0,a.useState)(!0),[S,P]=(0,a.useState)(!0),[A,C]=(0,a.useState)(null),[D,I]=(0,a.useState)(null),[U,$]=(0,a.useState)([]),[q]=(0,a.useState)(Date.now()),[T,z]=(0,a.useState)(!1),[E,_]=(0,a.useState)("normal"),[L,O]=(0,a.useState)(!1),[R,W]=(0,a.useState)(!1),[F,J]=(0,a.useState)(!1),M=(0,a.useCallback)(()=>{let e=v[w];return!!e&&U.includes(e.WordId)},[w,v,U]),G=(0,a.useCallback)(()=>{let e=v[w];if(!e)return;let t=e.WordId;!U.includes(t)&&(console.log(`Adding word ${t} to reviewedWords`),$(e=>{let r=[...e,t];return console.log("Updated reviewedWords:",r),r}),w<v.length-1&&setTimeout(()=>{j(e=>e+1),z(!1)},300))},[w,v,U]),B=async()=>{try{if(console.group("Starting Quiz Flow"),U.length<v.length){console.warn("Not all words reviewed"),alert("נא לעבור על כל המילים לפני המעבר למבחן"),console.groupEnd();return}let e=Math.floor((Date.now()-q)/1e3);console.log(`Task duration: ${e} seconds (${Math.floor(e/60)} minutes)`);let t=(0,d.c4)();if(!t)throw console.error("No authentication token available"),Error("Authentication required");if(D&&!D.startsWith("client_"))try{let r=await fetch("/api/tasks",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({taskId:D,TaskScore:100,DurationTask:e,CompletionDate:new Date().toISOString()})});console.log(`Task completion API response status: ${r.status}`),r.ok?console.log("Successfully completed flashcard task"):console.error("API error when completing flashcard task:",await r.text())}catch(e){console.error("Error calling task completion API:",e)}else console.log("Using temporary task ID, skipping flashcard task completion");let r=null;try{let e=(0,h.x$)(g);console.log(`Creating quiz task with formatted topic name: "${e}"`);let s=await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({TopicName:e,Level:f,TaskType:"quiz",StartDate:new Date().toISOString()})});if(console.log(`Quiz task creation API response status: ${s.status}`),s.ok){if(r=(await s.json()).TaskId,console.log("Quiz task created successfully with ID:",r),U.length>0)try{let e=await fetch("/api/words-in-task",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({taskId:r,wordIds:U})});console.log(`Add words to quiz task API response status: ${e.status}`),e.ok?console.log(`Successfully added ${U.length} words to quiz task`):console.warn("Failed to add words to quiz task")}catch(e){console.error("Error adding words to quiz task:",e)}}else console.error("Failed to create quiz task:",await s.text()),r=`client_${(0,u.A)()}`}catch(e){console.error("Error creating quiz task:",e),r=`client_${(0,u.A)()}`}let s=new URLSearchParams({level:f.toString()});r&&s.append("taskId",r);let a=`/topics/${g}/tasks/quiz?${s.toString()}`;console.log(`Navigating to quiz URL: ${a}`),l.push(a)}catch(e){console.error("Error starting quiz:",e),C("אירעה שגיאה במעבר למבחן. אנא נסו שנית.")}finally{console.groupEnd()}},Q=(0,a.useCallback)(()=>{let e=v[w]?.Word;if(!e)return;let t=new SpeechSynthesisUtterance(e);t.rate="slow"===E?.7:1,t.lang="en-US",window.speechSynthesis.speak(t)},[w,v,E]),V=`${g.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")} - level ${f}`;return(console.log("Rendering FlashcardTask. allWordsReviewed:",R),console.log(`Reviewed ${U.length}/${v.length} words`),t||k||S)?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 via-orange-50 to-red-50 p-6 flex justify-center items-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"inline-block w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mb-4"}),(0,s.jsx)("p",{className:"text-xl font-medium text-gray-700",children:"טוען כרטיסיות..."})]})}):A?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 via-orange-50 to-red-50 p-6 flex justify-center items-center",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-white p-8 rounded-2xl shadow-xl text-center",children:[(0,s.jsx)("div",{className:"text-red-500 text-5xl mb-4",children:"❌"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:A}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"לא ניתן לטעון את הכרטיסיות כרגע. נא לנסות שוב מאוחר יותר."}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 transition-all duration-300",children:"נסה שוב"}),(0,s.jsx)(i(),{href:"#",className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-all duration-300",children:"חזרה לנושאים"})]})]})}):0===v.length?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 via-orange-50 to-red-50 p-6 flex justify-center items-center",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-white p-8 rounded-2xl shadow-xl text-center",children:[(0,s.jsx)("div",{className:"text-orange-500 text-5xl mb-4",children:"\uD83D\uDCDA"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"אין מילים זמינות"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"אין מילים זמינות לנושא זה ברמה הנוכחית."}),(0,s.jsx)(i(),{href:"#",className:"px-6 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 transition-all duration-300 inline-block",children:"חזרה לנושאים"})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 via-orange-50 to-red-50 p-6 relative",dir:"rtl",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-center text-gray-800 mb-6 mt-2",children:V}),(0,s.jsx)("main",{className:"max-w-4xl mx-auto mt-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:["כרטיסיה ",w+1," מתוך ",v.length]}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:["נסקרו: ",U.length," מתוך ",v.length]})]}),(0,s.jsxs)("div",{className:"relative h-72 bg-gradient-to-br from-orange-50 to-yellow-50 rounded-xl flex flex-col justify-center items-center mb-8 cursor-pointer transform hover:scale-[1.02] transition-all duration-300 shadow-md",onClick:()=>z(!T),children:[(0,s.jsx)("h2",{className:"text-5xl font-bold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent text-center px-4",children:T?v[w]?.Translation:v[w]?.Word}),!T&&v[w]?.ExampleUsage&&(0,s.jsx)("p",{className:"text-gray-600 text-xl italic mt-6 px-12 text-center",children:v[w].ExampleUsage})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center gap-6 mb-8",children:[(0,s.jsx)("button",{onClick:()=>{w>0&&(j(e=>e-1),z(!1))},className:"px-8 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 transition-all duration-300 transform hover:-translate-y-1 disabled:opacity-50 disabled:hover:transform-none",disabled:0===w,children:"הקודם"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:Q,className:"w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center text-orange-600 hover:bg-orange-200 transition-colors",title:"השמע הגייה",children:(0,s.jsx)(n.pPd,{size:24})}),(0,s.jsxs)("select",{value:E,onChange:e=>_(e.target.value),className:"border-2 border-orange-200 text-gray-700 rounded-xl px-4 py-2 focus:outline-none focus:border-orange-400",children:[(0,s.jsx)("option",{value:"normal",children:"מהירות רגילה"}),(0,s.jsx)("option",{value:"slow",children:"מהירות איטית"})]})]}),(0,s.jsx)("button",{onClick:()=>{w<v.length-1&&(j(e=>e+1),z(!1))},className:"px-8 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 transition-all duration-300 transform hover:-translate-y-1 disabled:opacity-50 disabled:hover:transform-none",disabled:w===v.length-1,children:"הבא"})]}),(0,s.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,s.jsx)("button",{onClick:G,className:`px-8 py-3 ${M()?"bg-gray-400 hover:bg-gray-500":"bg-green-500 hover:bg-green-600"} 
    text-white rounded-xl transition-all duration-300 transform hover:-translate-y-1 shadow-md hover:shadow-lg`,disabled:M(),children:M()?"✓ מילה סומנה כנלמדה":"סמן מילה כמילה שלמדתי ✓"}),(0,s.jsx)("button",{onClick:()=>O(!0),className:"px-8 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all duration-300 transform hover:-translate-y-1 shadow-md hover:shadow-lg",children:"צפה במילים שנסקרו \uD83D\uDCDA"})]}),(R||U.length>=v.length)&&(0,s.jsx)("div",{className:"flex justify-center mt-8",children:(0,s.jsx)("button",{onClick:B,className:"px-8 py-4 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-300 transform hover:-translate-y-1 shadow-md hover:shadow-lg text-lg",children:"סיימתי ללמוד - התחל מבחן! \uD83C\uDFAF"})})]})}),L&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex justify-center items-center p-4 z-50",children:(0,s.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-2xl max-w-md w-full max-h-[80vh] overflow-y-auto",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"מילים שנסקרו \uD83C\uDF1F"}),U.length>0?(0,s.jsx)("ul",{className:"space-y-4",children:U.map(e=>{let t=v.find(t=>t.WordId===e);return t&&(0,s.jsx)("li",{className:"flex justify-between items-center p-3 bg-orange-50 rounded-xl",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-700",children:t.Word}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:t.Translation})]})},e)})}):(0,s.jsx)("p",{className:"text-gray-500 text-center py-4",children:"אין עדיין מילים שנסקרו."}),(0,s.jsx)("button",{onClick:()=>O(!1),className:"mt-6 w-full py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 transition-all duration-300 transform hover:-translate-y-1",children:"סגור"})]})})]})}},70173:(e,t,r)=>{"use strict";function s(){return null}r.d(t,{c4:()=>s}),r(32970)},74952:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},80408:()=>{},80483:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var s=r(24332),a=r(48819),n=r(67851),o=r.n(n),l=r(97540),i={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let d={children:["",{children:["topics",{children:["[topicName]",{children:["tasks",{children:["flashcard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,15262)),"/Users/amitnachman/Desktop/280425/apps/web/src/app/topics/[topicName]/tasks/flashcard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,97814)),"/Users/amitnachman/Desktop/280425/apps/web/src/app/topics/[topicName]/tasks/layout.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,20685)),"/Users/amitnachman/Desktop/280425/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,92341,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/amitnachman/Desktop/280425/apps/web/src/app/topics/[topicName]/tasks/flashcard/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/topics/[topicName]/tasks/flashcard/page",pathname:"/topics/[topicName]/tasks/flashcard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},87032:()=>{},97814:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(38828);function a({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{children:e})})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[191,787,989,843,704],()=>r(80483));module.exports=s})();